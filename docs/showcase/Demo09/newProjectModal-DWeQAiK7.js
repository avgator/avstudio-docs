import{h as m,F as t,r as x,j as r,M as b,G as P,S as c,B as l,eQ as q,z as y}from"./main-C9kTvUvK.js";import{u as C}from"./mainLayout-BQrZppkX.js";import{h as k}from"./moment-G82_0lEo.js";import"./details-CQoO5yCc.js";import"./Styles-B6kWeBqL.js";import"./index-DimBv2aS.js";import"./formItemPropsWrapper-ChMcIfaN.js";import"./renderActionTag-C_HVBKU8.js";import"./modificatorAPI-Clnut5Hb.js";import"./index-CCUbw95p.js";import"./pageAPI-4o2eRx6B.js";import"./SettingOutlined-CxBXSFIm.js";const{Option:T}=c,U=({setOpenNewProjectModal:o})=>{const i=C(e=>e.themesList),u=m(e=>e.myProjects??[]),p=m(e=>e.myTemplates??[]),[a]=t.useForm(),n=()=>{a.submit()};function d(e){return![...u,...p].some(s=>s.attributes.name===e)}const f=({name:e,theme:s})=>{j(!0),q({inputData:{name:e,theme:s}}).then(()=>{o(!1),y.success("Project created")})},[h,j]=x.useState(!1);return r.jsx("div",{onKeyUp:e=>{e.key==="Enter"&&n()},children:r.jsx(b,{maskClosable:!1,title:"Create New Project",open:!0,onCancel:()=>o(!1),footer:[r.jsx(l,{onClick:()=>o(!1),children:"Cancel"},"back"),r.jsx(l,{loading:h,type:"primary",onClick:n,children:"Add new project"},"submit")],children:r.jsxs(t,{labelCol:{xs:{span:9}},wrapperCol:{xs:{span:12}},form:a,initialValues:{name:`New project (${k(new Date).format("MMM Do, h:mm a")})`,theme:i?.[0]?.id,defaultOrientation:"portrait"},onFinish:f,scrollToFirstError:!0,children:[r.jsx(t.Item,{colon:!1,required:!1,name:"name",label:"Name",rules:[{required:!0,message:"This field is required."},()=>({validator(e,s){return s&&d(s)?Promise.resolve():Promise.reject(new Error("Project name must be unique"))}})],children:r.jsx(P,{})}),r.jsx(t.Item,{colon:!1,required:!1,name:"theme",label:"Theme",rules:[{required:!0,message:"This field is required."}],children:r.jsx(c,{children:i?.map(e=>r.jsx(T,{value:e.id,children:e.attributes.name},e.id))})})]})})})};export{U as default};
