import{r as u,j as e,a3 as y,aG as j,i as x,G as E,B as h,aK as I,ay as v,z as C}from"./main-C9kTvUvK.js";import{I as w,S as k}from"./index-DimBv2aS.js";const R=({initialValue:a,saveInProgress:o,setIsEditing:l,setSaveInProgress:d,save:r,style:i})=>{const[s,c]=u.useState(a);switch(typeof a){case"boolean":return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1em",...i},children:[o&&e.jsx(x,{}),e.jsx(k,{onChange:t=>{c(t==="true")},value:s?"true":"false",options:["true","false"]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx(h,{style:{marginRight:2},type:"dashed",children:e.jsx(I,{onClick:()=>r(s),style:{color:"var(--ant-primary-5)"}})}),e.jsx(h,{onClick:()=>{l(!1),d(!1)},type:"dashed",children:e.jsx(v,{style:{color:"gray"}})})]})]});case"string":return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1em",...i},children:[o&&e.jsx(x,{}),e.jsx(E,{spellCheck:!1,autoFocus:!0,onPressEnter:()=>r(s),onBlur:()=>r(s),onChange:t=>{t.stopPropagation(),c(t.target.value)},value:s})]});case"number":case"object":return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1em",...i},children:[o&&e.jsx(x,{}),e.jsx(w,{style:{width:"100%"},autoFocus:!0,onPressEnter:()=>r(s),onBlur:()=>r(s),onChange:t=>c(t),value:s})]});default:return null}},P=({value:a,onChange:o,initialValue:l,validators:d,style:r})=>{const[i,s]=u.useState(!1),[c,t]=u.useState(!1);function g(n){t(!0),o(n).then(()=>{s(!1),t(!1)})}function m(n){if(n===l){s(!1),t(!1);return}if(d?.length){let f=[];return d.forEach(p=>{f.push(p(n))}),Promise.all(f).then(()=>{g(n)}).catch(p=>{C.error(p.message)})}else g(n)}return u.useEffect(()=>{const n=f=>{f.keyCode===27&&s(!1)};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[l]),i?e.jsx(R,{initialValue:l,saveInProgress:c,setIsEditing:s,setSaveInProgress:t,save:m,style:r}):e.jsxs("div",{style:{...r},children:[typeof a=="boolean"?e.jsx(y,{style:{padding:"3px",lineHeight:"1em"},color:a?"green":"red",children:a?"true":"false"}):a,e.jsx(j,{style:{marginLeft:"0.3em",color:"var(--ant-primary-5)"},onClick:()=>{s(!0)}})]})};export{P as E};
