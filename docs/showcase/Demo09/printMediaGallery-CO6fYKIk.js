import{M as p,j as e,E as C,f as I,r as b,B as g,cH as y,bo as k,a3 as x,a0 as v,ax as F,N,cI as w,z as h,y as D}from"./main-C9kTvUvK.js";const B=a=>p.info({icon:null,maskClosable:!0,content:e.jsx(e.Fragment,{children:a}),okText:"Close"}),P=({currentProject:a,selectFile:n,setSelectFile:u,renderAsModalPicker:r,style:f,setUploadState:l})=>{const s=a?.id,c=a?.attributes?.media?.data?.filter(t=>t.attributes.mime.includes("image"));return e.jsx(e.Fragment,{children:e.jsx(y,{style:f,children:c?.map(t=>{let i=t.id;try{const d=JSON.parse(t.attributes.alternativeText),{uuid:j}=d;j&&(i=j)}catch{}const{url:m}=k({imageId:t.id,project:a,renderEnvtype:"editor"});let o={};return t.id===n&&(o={borderColor:"var(--ant-primary-5)"}),a&&e.jsxs("div",{style:o,onClick:()=>r&&u(t.id),className:"thumb",children:[e.jsx("img",{className:"pic",src:m,alt:t.attributes.name}),e.jsxs(x,{className:"imgIDBox",children:["ID: ",i]}),!r&&e.jsxs("div",{className:"overlay",children:[e.jsx(v,{onClick:()=>{B(e.jsxs("div",{style:{display:"flex",flexFlow:"column",gap:10},children:[e.jsx("div",{children:e.jsxs(x,{className:"imgIDBox",children:["ID: ",i]})}),e.jsx("img",{className:"pic",src:m,alt:t.attributes.name})]}))}}),e.jsx(F,{onClick:()=>{N({icon:e.jsx(D,{}),title:"Remove media file?",content:`Please confirm removing ${t.attributes.name} from project media library`,okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},onOk:()=>{s&&l&&(l("removing"),w(s,t.id).then(()=>{l(""),h.success("File deleted")}).catch(()=>{h.error("Failed to delete file")}))},onCancel:()=>{}})}})]})]},t.id)})})})},E=C.memo(({style:a,renderAsModalPicker:n,uploadState:u,setUploadState:r})=>{const f=I(d=>d.workingProject),[l,s,c]=n||[],[t,i]=b.useState(null);function m(){c&&c(t),s&&s(!1)}const o=e.jsx(P,{style:a,setSelectFile:i,selectFile:t,renderAsModalPicker:n,currentProject:f,uploadState:u,setUploadState:r});return n!==void 0?e.jsx(p,{destroyOnClose:!0,maskClosable:!1,title:"Pick Image",open:l,onCancel:()=>s&&s(!1),footer:[e.jsx(g,{onClick:()=>{i(null),s&&s(!1)},children:"Cancel"},"back"),e.jsx(g,{disabled:t===null,type:"primary",onClick:()=>m(),children:"Pick Image"},"submit")],children:o}):e.jsxs(e.Fragment,{children:[" ",o]})});export{E as P,B as s};
